// all condition matches then that stage will execute

pipeline{
    agent{
        label 'java-slave'
    }
    environment{
        Deploy = "prod"
    }
    stages{
        stage('dev'){
            steps{
                echo "dev deloyment"
            }
        }
        stage('prod'){
            when{
                allOf{
                    environment name: 'Deploy', value: 'prod'
                    expression {BRANCH_NAME == 'prod'} 
                }
            }
            steps{
                echo "prod deployment"
            }
        }
    }
}
